BEGIN
  FOR
 select count(p1.id_file),
 (
    select count(p1.id_file) from activities as p1
    where p1.activity_date > :DATE_FROM and  p1.activity_date < :DATE_TO
    and p1.id_activity = 499
 ) from activities as p1 where p1.activity_date > :DATE_FROM
 and  p1.activity_date < :DATE_TO
    and  p1.id_activity = 498    INTO :srochnye, :kontract
  DO
  BEGIN
      procent =  (kontract / srochnye)*100;
  END
END

BEGIN
  FOR select EXTRACT(YEAR FROM p1.registr_date), count(p1.id_file) from personal_file as p1
     where p1.registr_date > '01.01.2000'  group by EXTRACT(YEAR FROM p1.registr_date)
     INTO :NUM_YEAR, :value_1
  DO
  BEGIN
            
    if (:NUM_YEAR > 2000) then
    begin
       value_2 = value_1;
       value_4 = (value_2 / value_3)*100;
       if (value_4 > 100) then
       begin
         percent = value_4 - 100;
       end 
       else
       begin
         percent = (100 - value_4)*(-1) ;
       end 
       value_3 = value_2;
       suspend;
    end 
    else
    begin
        value_3 = value_1;
    end
  END
END